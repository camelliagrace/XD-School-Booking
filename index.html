<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XD School Booking</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #004e92, #000428);
      color: #ffffff;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #002b5c;
      padding: 20px;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header img {
      height: 60px;
    }
    .hero {
      padding: 40px 20px;
      text-align: center;
    }
    .hero h1 {
      font-size: 2.5rem;
      color: #00e5ff;
    }
    .hero p {
      font-size: 1.2rem;
      color: #b3ecff;
    }
    .container {
      max-width: 700px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
    }
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"],
    select {
      width: 100%;
      padding: 12px;
      border-radius: 6px;
      border: none;
      font-size: 1rem;
    }
    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .checkbox-group label {
      display: flex;
      align-items: center;
      background-color: rgba(0,0,0,0.2);
      padding: 8px;
      border-radius: 6px;
    }
    .checkbox-group input[type="checkbox"] {
      margin-right: 10px;
    }
    button {
      width: 100%;
      padding: 12px;
      background-color: #00e5ff;
      color: #000428;
      font-weight: bold;
      font-size: 1.1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #status {
      margin-top: 20px;
      padding: 20px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
    }
    .qr-code {
      text-align: center;
      margin-top: 30px;
    }
    .qr-code img {
      width: 150px;
      height: 150px;
    }
    .qr-code a {
      color: #00ffcc;
      text-decoration: underline;
    }
    footer {
      text-align: center;
      padding: 20px;
      background-color: #001f3f;
      color: #aaa;
    }
  </style>
</head>
<body>
  <header>
    <img src="xdschools-logo.jpg" alt="XD Schools Logo">
  </header>
  <div class="hero">
    <h1>XD School Booking</h1>
    <p>🎯 Book, Play, Empower! 🌟 Transform lives with every booking—support 10 underprivileged students to shine brightly! 💖</p>
  </div>
  <div class="container">
    <div class="form-group">
      <label for="name">📝 Full Name</label>
      <input type="text" id="name" placeholder="e.g., John Doe" required>
    </div>
    <div class="form-group">
      <label for="email">📧 Email</label>
      <input type="email" id="email" placeholder="e.g., john@example.com" required>
    </div>
    <div class="form-group">
      <label for="phone">📞 Phone (+60)</label>
      <input type="tel" id="phone" pattern="^\+60[0-9]{8,10}$" placeholder="+60123456789" required>
    </div>
    <div class="form-group">
      <label>🏟️ Facilities (select one or more)</label>
      <div class="checkbox-group" id="facility-options">
        <label><input type="checkbox" value="Swimming Pool ($23/hr)"> Swimming Pool ($23/hr)</label>
        <label><input type="checkbox" value="Football Field A ($15/hr)"> Football Field A ($15/hr)</label>
        <label><input type="checkbox" value="Football Field B ($15/hr)"> Football Field B ($15/hr)</label>
        <label><input type="checkbox" value="Tennis Court A ($12/hr)"> Tennis Court A ($12/hr)</label>
        <label><input type="checkbox" value="Tennis Court B ($12/hr)"> Tennis Court B ($12/hr)</label>
        <label><input type="checkbox" value="Tennis Court C ($12/hr)"> Tennis Court C ($12/hr)</label>
        <label><input type="checkbox" value="Volleyball Court A ($12/hr)"> Volleyball Court A ($12/hr)</label>
        <label><input type="checkbox" value="Volleyball Court B ($12/hr)"> Volleyball Court B ($12/hr)</label>
        <label><input type="checkbox" value="Volleyball Court C ($12/hr)"> Volleyball Court C ($12/hr)</label>
      </div>
    </div>
    <div class="form-group">
      <label for="date">📅 Date (Weekends Only)</label>
      <input type="date" id="date" required>
    </div>
    <div class="form-group">
      <label for="time">⏰ Time Slot</label>
      <select id="time" required>
        <option value="8:00–9:00 AM">8:00–9:00 AM</option>
        <option value="9:00–10:00 AM">9:00–10:00 AM</option>
        <option value="10:00–11:00 AM">10:00–11:00 AM</option>
        <option value="11:00 AM–12:00 PM">11:00 AM–12:00 PM</option>
      </select>
    </div>
    <div class="form-group">
      <label for="duration">⏳ Duration</label>
      <select id="duration" required>
        <option value="1">1 hour</option>
        <option value="2">2 hours</option>
        <option value="3">3 hours</option>
        <option value="4">4 hours</option>
      </select>
    </div>
    <div class="form-group">
      <input type="checkbox" id="rules" required>
      <label for="rules"> I agree to the terms and conditions</label>
    </div>
    <button onclick="submitBooking()">🚀 Submit Booking</button>
    <div id="status"></div>
    <div class="qr-code">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://www.thexdschool.com/" alt="Website QR Code">
      <p>🌐 To know more visit our website: <a href="https://www.thexdschool.com/" target="_blank">https://www.thexdschool.com/</a></p>
    </div>
  </div>
  <footer>
    © 2025 XD School. All rights reserved.
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const dateInput = document.getElementById('date');
      dateInput.min = new Date().toISOString().split('T')[0];
      dateInput.addEventListener('change', function () {
        const selectedDate = new Date(this.value);
        const day = selectedDate.getDay();
        if (day !== 0 && day !== 6) {
          alert('Please select a Saturday or Sunday.');
          this.value = '';
        }
      });
    });

    function submitBooking() {
      const name = document.getElementById('name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const facilities = Array.from(document.querySelectorAll('#facility-options input:checked')).map(cb => cb.value);
      const date = document.getElementById('date').value;
      const time = document.getElementById('time').value;
      const duration = document.getElementById('duration').value;
      const rules = document.getElementById('rules').checked;

      // Validate weekend date
      const selectedDate = new Date(date);
      const day = selectedDate.getDay();
      if (day !== 0 && day !== 6 && date) {
        document.getElementById('status').innerText = '⚠️ Please select a Saturday or Sunday.';
        return;
      }

      if (!name || !email || !phone || facilities.length === 0 || !date || !time || !duration || !rules) {
        document.getElementById('status').innerText = '⚠️ Please fill all fields correctly.';
        return;
      }

      const revenue = calculateRevenue(facilities.join(', '), duration);
      const bookingID = Date.now().toString();

      // Update status with submission message
      const statusDiv = document.getElementById('status');
      statusDiv.innerHTML = `
        <div class="thank-you">
          🎉 Thank you for your booking! 🌟<br>
          Your request is being processed, and an email confirmation will be sent if successful. ⏳<br><br>
          🌟 Because of you, 10 students will walk into school with confidence, dignity, and hope. ❤️<br>
          Your support means more than you know! 🎉<br><br>
        </div>
      `;

      const data = {
        name,
        email,
        phone,
        facilities: facilities.join(', '),
        date,
        time,
        duration,
        revenue,
        bookingID
      };

      // Send data to Google Apps Script
      fetch('https://script.google.com/macros/s/AKfycbz4leVn7hNm3d-s8bF_kYmYcf1FGOIwF-VIPehkCd6kvd3jKijmnTFRtdFC_y8uDBHE/exec', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.text())
      .then(text => {
        console.log('Response received:', text);
        if (text.includes("Success")) {
          statusDiv.innerHTML += '<p style="color: #00ff00;">✅ Submission successful. Check your email!</p>';
        } else {
          statusDiv.innerHTML += '<p style="color: #ff4444;">⚠️ Submission failed: ' + text + '</p>';
        }
      })
      .catch(error => {
        console.error('Error submitting data:', error);
        statusDiv.innerHTML += '<p style="color: #ff4444;">⚠️ Submission failed. Please try again or contact support.</p>';
      });
    }

    function calculateRevenue(facilities, duration) {
      const rates = {
        'Swimming Pool ($23/hr)': 23,
        'Football Field A ($15/hr)': 15,
        'Football Field B ($15/hr)': 15,
        'Tennis Court A ($12/hr)': 12,
        'Tennis Court B ($12/hr)': 12,
        'Tennis Court C ($12/hr)': 12,
        'Volleyball Court A ($12/hr)': 12,
        'Volleyball Court B ($12/hr)': 12,
        'Volleyball Court C ($12/hr)': 12
      };
      const hours = parseInt(duration) || 1;
      const facilityList = facilities.split(', ');
      return facilityList.reduce((total, facility) => {
        return total + ((rates[facility.trim()] || 0) * hours);
      }, 0);
    }
  </script>
